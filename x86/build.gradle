// settings

plugins
{
    id 'aasgard.asm'
    id 'cpp-library'
}

// project

group 'aasgard'
version '0.1.0-SNAPSHOT'

library
{
    // #XXX: clang can't cross compile to system "any"
    targetMachines = [ machines.linux.x86 ]

    linkage = [ Linkage.STATIC ]
    
    dependencies.api project(':psys')
    
    binaries.whenElementFinalized {
    	def compiler = compileTask.get()
    	compiler.compilerArgs.addAll '-std=c++17', '-ffreestanding', '-Werror', '-Wall', '-Wno-unused-private-field'
    }
}

check.dependsOn ':x86:test:check'
